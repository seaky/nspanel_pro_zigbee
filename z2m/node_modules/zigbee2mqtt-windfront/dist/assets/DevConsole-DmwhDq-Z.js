import{b as h,j as n,l as f,a as y,k as q,r,c as v,db as T,C as p,T as E,dc as O,dd as R,de as A}from"./index-BFQ_Rrcw.js";import{I as N}from"./InputField-CIKw2Xrr.js";import{S as w}from"./SelectField-CyWoaAVb.js";import{T as k}from"./TextareaField-CbVtSljh.js";import{I as S}from"./InfoAlert-CKOVoAit.js";import"./envs-CSqIi4cL.js";const D=({sourceIdx:t})=>{const{t:a}=h(["devConsole","common"]),[c,l]=r.useState(""),[m,s]=r.useState("{}"),d=r.useMemo(()=>{if(!c)return!1;if(m!=="")try{const o=JSON.parse(m);if(typeof o!="object"||Array.isArray(o))return!1}catch{return!1}return!0},[c,m]),u=r.useCallback(async()=>{await v(t,c,m===""?m:JSON.parse(m))},[t,c,m]);return n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-lg mb-2",children:a(o=>o.send_mqtt)}),n.jsx(S,{children:n.jsx("a",{href:A,target:"_blank",rel:"noreferrer",className:"link link-hover",children:a(o=>o.read_the_docs_info,{ns:"common"})})}),n.jsx(N,{type:"text",name:"topic",label:a(o=>o.topic),detail:a(o=>o.mqtt_topic_info),placeholder:"bridge/request/permit_join",value:c,onChange:o=>l(o.target.value),className:"input validator w-full",required:!0}),n.jsx(k,{name:"payload",label:a(o=>o.payload,{ns:"common"}),rows:5,value:m,onChange:o=>s(o.target.value),className:"textarea validator w-full"}),n.jsx("div",{className:"join join-horizontal mt-2",children:n.jsx(p,{onClick:u,disabled:!d,className:"btn btn-success",children:a(o=>o.send,{ns:"common"})})})]})},L=({sourceIdx:t})=>{const{t:a}=h(["devConsole","common"]),c=y(q(e=>e.converters[t])),[l,m]=r.useState(),[s,d]=r.useState({name:"",code:""}),u=r.useMemo(()=>(l||!!s.name)&&!!s.code,[l,s]),o=r.useCallback(e=>{if(e.target.value){const i=c.find(C=>C.name===e.target.value);i&&(m(i),d(i))}else m(void 0),d({name:"",code:""})},[c]),x=r.useCallback(e=>{d(i=>({name:e.target.value,code:i.code}))},[]),b=r.useCallback(e=>{d(i=>({name:i.name,code:e.target.value}))},[]),_=r.useCallback(async()=>{await v(t,"bridge/request/converter/save",s)},[t,s]),j=r.useCallback(async()=>{await v(t,"bridge/request/converter/remove",{name:s.name})},[t,s.name]);return n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-lg mb-2",children:a(e=>e.add_update_external_converter)}),n.jsxs(S,{children:[n.jsx("a",{href:O,target:"_blank",rel:"noreferrer",className:"link link-hover",children:a(e=>e.read_the_docs_info,{ns:"common"})}),n.jsx("a",{href:R,target:"_blank",rel:"noreferrer",className:"link link-hover",children:a(e=>e.codespace_info)})]}),n.jsxs(w,{name:"converter_name_edit",label:a(e=>e.select_converter_to_edit),onChange:o,value:l?.name??"",children:[n.jsxs("option",{value:"",children:["N/A - ",a(e=>e.create_new_converter)]}),c.map(e=>n.jsx("option",{value:e.name,children:e.name},e.name))]}),n.jsx(N,{name:"converter_name",label:a(e=>e.name,{ns:"common"}),type:"text",onChange:x,value:s.name,readOnly:l!==void 0,required:!0}),n.jsx(k,{name:"converter_code",label:a(e=>e.code),rows:5,value:s.code,onChange:b,className:"textarea validator w-full",required:!0}),n.jsxs("div",{className:"join join-horizontal mt-2",children:[n.jsx(p,{onClick:_,disabled:!u,className:"btn btn-success join-item",children:a(e=>e.save,{ns:"common"})}),n.jsx(E,{onClick:j,disabled:!l,className:"btn btn-error join-item",title:a(e=>e.delete,{ns:"common"}),modalDescription:a(e=>e.dialog_confirmation_prompt,{ns:"common"}),modalCancelLabel:a(e=>e.cancel,{ns:"common"}),children:a(e=>e.delete,{ns:"common"})})]})]})},M=({sourceIdx:t})=>{const{t:a}=h(["devConsole","common"]),c=y(q(e=>e.extensions[t])),[l,m]=r.useState(),[s,d]=r.useState({name:"",code:""}),u=r.useMemo(()=>(l||!!s.name)&&!!s.code,[l,s]),o=r.useCallback(e=>{if(e.target.value){const i=c.find(C=>C.name===e.target.value);i&&(m(i),d(i))}else m(void 0),d({name:"",code:""})},[c]),x=r.useCallback(e=>{d(i=>({name:e.target.value,code:i.code}))},[]),b=r.useCallback(e=>{d(i=>({name:i.name,code:e.target.value}))},[]),_=r.useCallback(async()=>{await v(t,"bridge/request/extension/save",s)},[t,s]),j=r.useCallback(async()=>{await v(t,"bridge/request/extension/remove",{name:s.name})},[t,s.name]);return n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-lg mb-2",children:a(e=>e.add_update_external_extension)}),n.jsx(S,{children:n.jsx("a",{href:T,target:"_blank",rel:"noreferrer",className:"link link-hover",children:a(e=>e.read_the_docs_info,{ns:"common"})})}),n.jsxs(w,{name:"extension_name_edit",label:a(e=>e.select_extension_to_edit),onChange:o,value:l?.name??"",children:[n.jsxs("option",{value:"",children:["N/A - ",a(e=>e.create_new_extension)]}),c.map(e=>n.jsx("option",{value:e.name,children:e.name},e.name))]}),n.jsx(N,{name:"extension_name",label:a(e=>e.name,{ns:"common"}),type:"text",onChange:x,value:s.name,readOnly:l!==void 0,required:!0}),n.jsx(k,{name:"extension_code",label:a(e=>e.code),rows:5,value:s.code,onChange:b,className:"textarea validator w-full",required:!0}),n.jsxs("div",{className:"join join-horizontal mt-2",children:[n.jsx(p,{onClick:_,disabled:!u,className:"btn btn-success join-item",children:a(e=>e.save,{ns:"common"})}),n.jsx(E,{onClick:j,disabled:!l,className:"btn btn-error join-item",title:a(e=>e.delete,{ns:"common"}),modalDescription:a(e=>e.dialog_confirmation_prompt,{ns:"common"}),modalCancelLabel:a(e=>e.cancel,{ns:"common"}),children:a(e=>e.delete,{ns:"common"})})]})]})};function F(t,a){switch(a){case"mqtt":return n.jsx(D,{sourceIdx:t});case"external_converters":return n.jsx(L,{sourceIdx:t});case"external_extensions":return n.jsx(M,{sourceIdx:t})}}const g=({isActive:t})=>t?"tab tab-active":"tab";function V({sourceIdx:t,tab:a}){const{t:c}=h("devConsole");return n.jsxs("div",{className:"tabs tabs-border",children:[n.jsx(f,{to:`/settings/${t}/dev-console/mqtt`,className:g,children:c(l=>l.mqtt)}),n.jsx(f,{to:`/settings/${t}/dev-console/external_converters`,className:g,children:c(l=>l.external_converters)}),n.jsx(f,{to:`/settings/${t}/dev-console/external_extensions`,className:g,children:c(l=>l.external_extensions)}),n.jsx("div",{className:"tab-content block h-full bg-base-100 p-3",children:F(t,a)})]})}export{V as default};
